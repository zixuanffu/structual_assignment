\documentclass[12pt]{article}
\usepackage{fullpage,graphicx,psfrag,amsmath,amsfonts,verbatim}
\usepackage[small,bf]{caption}
\usepackage{amsthm}
% \usepackage[hidelinks]{hyperref}
\usepackage{hyperref}
\usepackage{bbm} % for the indicator function to look good
\usepackage{color}
\usepackage{mathtools}
\usepackage{fancyhdr} % for the header
\usepackage{booktabs} % for regression table display (toprule, midrule, bottomrule)
\usepackage{adjustbox} % for regression table display
\usepackage{threeparttable} % to use table notes
\usepackage{natbib} % for bibliography
\usepackage{tikz}
\usetikzlibrary{arrows.meta}
\input newcommand.tex
\bibliographystyle{apalike}
% \setlength{\parindent}{0pt} % remove the automatic indentation

\title{\textbf{A dynamic model of personality, schooling, and occupational choice}}
\author{Fu Zixuan}
\date{\today}

\begin{document}
\maketitle
% \thispagestyle{empty}
% \begin{abstract}

% \end{abstract}

% \newpage
% \thispagestyle{empty}
% \tableofcontents
% \newpage

% \setcounter{page}{1}

\section{Summary}
The paper by \citet{todd2020dynamic} examines the individual's choice of
schooling or working at each period as the optimal solution to maximizing
lifetime utility. This falls under the classical single-agent dynamic problem
with finite periods. The dynamic decision at each period involves the
individual's education and occupation choice. The state that evolves over time
includes an individual's schooling/working experience, which grows over time,
cognitive ability, which is time-invariant, and the novel addition of
individual personality measured in five dimensions, which also develops over
time. While the state is (noisily) observed, the model incorporates an
unobserved element -- latent type, which interacts with the observed state and
the utility functions. By establishing a rich model that includes
cognitive ability, personality traits, and latent type, the authors aim to
answer how personality evolves over time in response to age and experience.

Secondly, although the model restricts the channels through which one variable
affects another, the estimation of model parameters helps quantify the
magnitude of these impacts. For example, the latent type transitions to the
next period type depending on the current type and personality. One can test
whether the latent type is time-variant using the parameter estimates. Lastly,
the model allows the simulation of two different education policies (tuition
reduction and compulsory schooling). While most of the identification results
rely on previous literature, notably \cite{hu2012nonparametric}, the paper
imposes further restrictions as in \citet{hu2017simple} to identify the
probability distribution of CCP, the law of motion of latent type k, and the
law of motion of the observed state. Once the nonparametric identification of
these probabilities is established, the paper uses the simulated methods of
moments to estimate all the model parameters, although the identification
arguments are challenging to establish when using moment-based estimators.

The next section will present the structural model in a simplified way and
discuss the estimation and simulation exercises. Afterwards, I will try to link
the identification arguments in the paper to what we learned in class. While it
seems to me that in the paper, the identification is independent of estimation,
I hope to establish a connection between the two and how one can aid the other.
Lastly, to emphasize the role of unobserved heterogeneity, I will summarize
cases where there is no unobserved heterogeneity (latent type), time-invariant,
and time-variant latent type.

\section{Model}
I simplify the model by abstracting from specific parametric form of all the
functions (utility function, transition probability specification etc.). Since
this is a classical single agent dynamic problem with finite horizons, I first
clarify the key variables and explain how each variable influence one another
with some visualization.
\paragraph{Choice variable} An individual chooses whether to go to school / work in blue collar/ white
collar job in each period. Since this is a lifetime decision, the choice is a
sequence of $d(15),d(16),\ldots,d(49)$ starting from age 15.
\paragraph{Observed state} Among the observed state variables, there are constant ones such as family
background $z$ and cognitive ability $c$. \footnote{Even til now, I still do
    not understand the reason why cognitive ability is set to be time-invariant.}
The rest are schooling $g(a)$ and working experience $x_1(a),x_2(a)$ and the 5
personality traits $\theta(a)$.
\paragraph{Latent type} The paper adds unobserved heterogeneity to the model because it allows the
model to better simulate the hypothetical policies as is the case in reality.
Here the latent type is denoted by $k(a)$ assuming that the type changes over
time. However, the specification of the transition nests time invariant latent
type which can be tested using the estimate.

The above mentioned variables can be summarized in the following figure~\ref{fig:}
\begin{figure}
    \centering
    \includegraphics[]{../Figures/viz.jpg}
\end{figure}

Going from bottom to top, the current type depends on the previous type via a transition probability matrix. The probability matrix depends on the current personality $\theta(a)$ and age $a$ as well as some shock $\eta(a)$. Therefore for every transition from $a$ to $a+1$ there is a corresponding transition matrix $L(a)$. This latent type plays a role because it is in the utility function such that ceteris paribus current utility from choice $m$ $u_m()$ will be different for different types. This is the only channel that the type affects the dynamic decision. 
We now focus on time changing state variables, personality $\theta(a)$ and experience $g,x_1,x_2$. For personality, the current $\theta(a)$ depends on the very initial $\theta(15)$ as well as age $a$ and years of schooling. This is where model restrictions manifest itself that only years of schooling can directly affect personality while working experience does not. It is the paper/author's assumption such that later we'll see the education policy that affect years of schooling will impact personality as well. Interestingly, personality is noisily observed in the sense that while the true personlaity $\theta(a) = f(a,g(a),\theta(a))$ evolves in a deterministic way, the observed personality $\theta^M(a) = \theta(a) + \zeta(a)$ is subject to some measurement error. 
For the rest of the variables, evolution is straightforward in the sense that the variable increases if the individual chooses that option $m_0,m_1,m_2$. That is 
$g(a+1) = g(a) + d_0(a)$, $x_1(a+1) = x_1(a) + d_1(a)$, $x_2(a+1) = x_2(a) + d_2(a)$ where $d_0,d_1,d_2$ are indicator functions of the choice $m_0,m_1,m_2$.

Now we are ready to establish (restate) the single agenet dynamic framework that has its root in \cite{rust}.
The choice at each period is obtained by maximizing the lifetime utility. The framework is similar to that of \cite{rust}.
For example, defining the utility function as $u(\omega,x)$ where $\omega$ is the state variable and $x$ is the choice variable, the value function is
$$V(\omega,\nu) = \max_x u(\omega,x) + \nu(x)+\delta E[V(\omega',\nu')|\omega,x]$$
We can rewrite the value function in terms of continuation value function such that $V(\omgea,\nu)=\max_x \tilde{v}(\omega,x,\nu)$ where $\tilde{v}(\omega,x,\nu)=\tilde{u}(\omega,x)+\nu(x)= u(\omega,x)+\nu(x)+\delta E[V(\omega',\nu')|\omega,x]$. 
One can establish a clear mapping between the model in the paper and this general framework. 

I found that the original notation in the paper a bit confusing. For the ease of understanding (for my own purpose), I will rewrite the model in the following way.
First for simplicity, I ignore the all shock except the preference shock $\epsilon(a,x)$ \footnote{When the agent is making a decision, the personality measurement error $\zeta$ is realized, the latent type transition shock $\eta$ is realized, the wage shock is not realized but agent takes expectation of it.} Therefore, to estba
\begin{itemize}
    \item The state variable $\omega$ is $(a,s(a))$. The choice variable $x$ is $m$ \footnote{$d_m(a)$ is the indicator function of the choice $m$}.
    \item The utility function $u(\omega,x)$ is the utility from going to sector $m$ which is $u_m(a,s(a))$.
    \item The continuation value $\tilde{v}(\omega,x,\nu)$ is $\tilde{v}_m(a,s(a))$ where $\tilde{v}_m(a,s(a)) = \tilde{u}_m(a,s(a)) + \nu_m(a,s(a))$.
    \item The value function $V(\omega,\nu)$ is $V(a,s(a),\nu) = \max_m \tilde{v}_m(a,s(a))$.
    \item The conditional choice probability is thus $\Pr(d_m(a)=1|a,s(a))=\frac{\exp(\tilde{v}_m(a,s(a)))}{\sum_{m'}\exp(\tilde{v}_{m'}(a,s(a)))}$.
\end{itemize}
Since we are in the finite horizon setting, the value function at the terminal period is $V(a,s(a),\nu) = u(a,s(a))+\nu(a,s(a))$. Fixing the parameters, and given a state $(a,s(a))$, we can solve recursively for the continuation value function $\tilde{v}_m(a,s(a))$ and the conditional choice probability $\Pr(d_m(a)=1|a,s(a))$ simulating the preference shock, one can obtain the choice $m$ at each period.Therefore, taking the simulated choice $m$ at each period, one can compute moments. The estimation is then to minimize the distance between the simulated moments and moments fromt the data.




\section{Discussion}
This section answers the question of what role the latent heterogeneity plays.

\pagebreak \newpage \bibliography{../References/ref.bib}

\end{document}

